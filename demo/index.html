<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>danmaku</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <div class="main-box">
            <div class="adv-danmaku">
                <canvas class="adv-danmaku-player"></canvas>
            </div>
            <div class="danmaku">
                <canvas class="danmaku-player"></canvas>
            </div>
            <div class="video-wrap">
                <video src="./img/index.mp4" type="video/mp4" class="video"></video>
            </div>
            <div class="video-controls">
                <div class="prograss">
                    <span class="current"></span>
                </div>
                <div class="control-bottom">
                    <div class="play-btn btn"></div>
                    <div class="time">
                        <div class="current-time">00:00</div>
                        <div class="divide">/</div>
                        <div class="duration">00:00</div>
                    </div>
                    <div class="on-off-btn" data-tooltip="关闭弹幕"></div>
                    <div class="input-area">
                        <input type="text" class="input" placeholder="输入弹幕内容" />
                        <div class="send-btn">发送</div>
                    </div>
                    <div>
                        <span>渲染类型</span>
                        <select name="renderStyle" class="render-style">
                            <option value="canvas">Canvas</option>
                            <option value="CSS3">CSS3</option>
                        </select>
                    </div>
                    <div class="full-screen"></div>
                </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/105/three.js"></script>
        <script>
            /**
            * @author mrdoob / http://mrdoob.com/
            * @author jetienne / http://jetienne.com/
            */
            /** @namespace */
            var THREEx	= THREEx || {}

            /**
             * provide info on THREE.WebGLRenderer
             * 
             * @param {Object} renderer the renderer to update
             * @param {Object} Camera the camera to update
            */
            THREEx.RendererStats = function () {
                var msMin = 100;
                var msMax = 0;
                var container = document.createElement( 'div' );
                container.style.cssText = 'width:80px;opacity:0.9;cursor:pointer';
                var msDiv = document.createElement( 'div' );
                msDiv.style.cssText = 'padding:0 0 3px 3px;text-align:left;background-color:#200;';
                container.appendChild( msDiv );
                var msText = document.createElement( 'div' );
                msText.style.cssText = 'color:#f00;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';
                msText.innerHTML= 'WebGLRenderer';
                msDiv.appendChild( msText );
                var msTexts	= [];
                var nLines = 9;
                for(var i = 0; i < nLines; i++){
                    msTexts[i] = document.createElement( 'div' );
                    msTexts[i].style.cssText = 'color:#f00;background-color:#311;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';
                    msDiv.appendChild( msTexts[i] );		
                    msTexts[i].innerHTML = '-';
                }
                var lastTime = Date.now();
                return {
                    domElement: container,
                    update: function(webGLRenderer){
                        // sanity check
                        // console.assert(webGLRenderer instanceof THREE.WebGLRenderer)
                        // refresh only 30time per second
                        if( Date.now() - lastTime < 1000/30 ) return;
                        lastTime = Date.now()
                        var i = 0;
                        msTexts[i++].textContent = "== Memory =====";
                        msTexts[i++].textContent = "Programs: "	+ webGLRenderer.info.memory.programs;
                        msTexts[i++].textContent = "Geometries: "+webGLRenderer.info.memory.geometries;
                        msTexts[i++].textContent = "Textures: "	+ webGLRenderer.info.memory.textures;
                        msTexts[i++].textContent = "== Render =====";
                        msTexts[i++].textContent = "Calls: "	+ webGLRenderer.info.render.calls;
                        msTexts[i++].textContent = "Vertices: "	+ webGLRenderer.info.render.vertices;
                        msTexts[i++].textContent = "Faces: "	+ webGLRenderer.info.render.faces;
                        msTexts[i++].textContent = "Points: "	+ webGLRenderer.info.render.points;
                    }
                }	
            };
        </script>
        <script>
            var rendererStats  = new THREEx.RendererStats()
            rendererStats.domElement.style.position = 'absolute';
            rendererStats.domElement.style.left = '0px';
            rendererStats.domElement.style.bottom = '0px';
            document.body.appendChild( rendererStats.domElement );
        </script>
        <script src="/dist/main.js"></script>
    </body>
</html>
